pipeline {
    agent any 
    tools{
        maven 'maven3.9.9'
         }
    stages {
      stage("build jar file") {
          steps {
              echo 'bulding the aplication...'
              sh 'mvn package'

          }
      }
     stage("build docker image") {
          steps {
              echo 'bulding the docker image...'
              withCredintials([usernamePassword(credintialsId: 'dockerhub' , passwordVariable: 'PASS' , usernameVariable: 'USER')]) {
                  sh 'docker build -t yoyo123c/momo:roro-2.0 .'
                  sh'docker login -u $USER -p $PASS
                  sh 'docker push yoyo123c/momo:roro-2.0'

              }
              

          }
      }

      stage("test") {
          steps {
              echo 'testing the aplication...'
          }
      }
      stage("deploy") {
          steps {
              echo 'deploying the aplication...'
           }     
      }
    }
}
